---

import * as fs from "node:fs";
import * as path from "node:path";
import { footerConfig, profileConfig } from "../config";
import { url } from "../utils/url-utils";

const currentYear = new Date().getFullYear();

// é¡µè„šè‡ªå®šä¹‰å†…å®¹é€»è¾‘
let customFooterHtml = "";
if (footerConfig.enable) {
	// ä¼˜å…ˆä½¿ç”¨ customHtmlï¼Œå¦‚æœä¸ºç©ºåˆ™ä½¿ç”¨ FooterConfig.html æ–‡ä»¶å†…å®¹
	if (footerConfig.customHtml && footerConfig.customHtml.trim() !== "") {
		customFooterHtml = footerConfig.customHtml.trim();
	} else {
		// customHtml ä¸ºç©ºæ—¶ï¼Œè¯»å– FooterConfig.html æ–‡ä»¶å†…å®¹
		try {
			const footerConfigPath = path.join(
				process.cwd(),
				"src",
				"FooterConfig.html",
			);
			customFooterHtml = fs.readFileSync(footerConfigPath, "utf-8");
			// ç§»é™¤HTMLæ³¨é‡Š
			customFooterHtml = customFooterHtml
				.replace(/<!--[\s\S]*?-->/g, "")
				.trim();
		} catch (error) {
			console.warn("FooterConfig.htmlæ–‡ä»¶è¯»å–å¤±è´¥:", error.message);
		}
	}
}
---

<!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">-->
<div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div>
<!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">-->
<div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6">
    <div class="transition text-50 text-sm text-center">
        {customFooterHtml && (
            <div class="mb-2" set:html={customFooterHtml}></div>
        )}
        &copy; <span id="copyright-year">{currentYear}</span> {profileConfig.name} ç‰ˆæƒæ‰€æœ‰ğŸ’«é‡‡ç”¨
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>è®¸å¯
		<br>
        æ¥è‡ª
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">Mizuki</a>&nbsp; Version <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">7.5</a> å¼ºåŠ›é©±åŠ¨
		<br>
        <a class="transition link text-[var(--primary)] font-medium inline-flex items-center" href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">
            <img alt="" src="/favicon/foot-icp.png" class="h-4 mr-1">çš–ICPå¤‡2025102598å·-1
        </a>
	</div>
</div>
